CREATE OR REPLACE PROCEDURE pavilions_rent(IN id_ten integer, IN sc_nam character varying, IN id_emp integer, IN pav_n character varying, 
	IN pav_stat character varying, rent_pav_stat character varying(15))
    LANGUAGE 'plpgsql'
    
AS $BODY$
DECLARE 
	id_re integer := (SELECT id_rent FROM rent ORDER BY id_rent DESC LIMIT 1) + 1;
	date_b date := CURRENT_DATE;
    date_e date := CURRENT_DATE + INTERVAL '1 month'; 
BEGIN 
	UPDATE pavilions
	SET pav_status = pav_stat
	WHERE sc_name = sc_nam AND pavilion_num = pav_n;

	INSERT INTO public.rent(
	id_rent, id_tenat, sc_name, id_employee, pavilion_num, pav_status, date_begin, date_end)
	VALUES (id_re, id_ten, sc_nam, id_emp, pav_n, rent_pav_stat, date_b, date_e); 
END;
$BODY$;
